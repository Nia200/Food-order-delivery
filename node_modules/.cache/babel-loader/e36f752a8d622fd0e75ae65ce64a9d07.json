{"ast":null,"code":"import _regeneratorRuntime from\"C:/D/my_project/Food-order-delivery/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/D/my_project/Food-order-delivery/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/D/my_project/Food-order-delivery/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useState}from\"react\";import Helmet from\"../components/Helmet/Helmet\";import CommonSection from\"../components/UI/common-section/CommonSection\";import{Container,Row,Col}from\"reactstrap\";import{Link}from\"react-router-dom\";import{useNavigate}from\"react-router-dom\";import{getAuth,createUserWithEmailAndPassword}from\"firebase/auth\";import{db}from\"../firebase.config\";import{collection,// setDoc,\n// getDocs,\naddDoc// updateDoc,\n// deleteDoc,\n// doc,\n}from\"firebase/firestore\";import{UploadTask}from\"firebase/storage\";// import { ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\n// import { setDoc, doc } from \"firebase/firestore\";\n// import { auth } from \"../firebase.config\";\n// import { storage } from \"../firebase.config\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Register=function Register(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var usersCollectionRef=collection(db,\"users\");var navigate=useNavigate();var createUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return addDoc(usersCollectionRef,{username:username,email:email,review:\"\"});case 2:case\"end\":return _context.stop();}}},_callee);}));return function createUser(){return _ref.apply(this,arguments);};}();var signup=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var auth;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();auth=getAuth();createUserWithEmailAndPassword(auth,email,password).then(function(userCredential){var user=userCredential.user;console.log(user);// console.log(user.uid);\nnavigate(\"/login\");}).catch(function(error){// setLoading(false);\nvar errorCode=error.code;var errorMessage=error.message;console.log(errorMessage);alert(\"Password should be at least 6 characters\");});// try {\n//   const userCredential = await createUserWithEmailAndPassword(\n//     auth,\n//     email,\n//     password\n//   );\n//   const user = await userCredential.user;\n//   const storageRef = ref(storage, `images/${Date.now() + username}`);\n//   const uploadTask = uploadBytesResumable(storageRef, file);\n//     uploadTask.on(\n//       (error) => {\n//         toast.error(error.message);\n//       },\n//       () => {\n//         getDownloadURL(uploadTask.snapshot.ref).then(async (downloadURL) => {\n//           // update user frofile\n//           await updateProfile(user, {\n//             displayName: username,\n//             photoURL: downloadURL,\n//           });\n//           // store user data in firebase database\n//           await setDoc(doc(db, \"users\", user.uid), {\n//             uid: user.uid,\n//             displayName: username,\n//             email,\n//             photoURL: downloadURL,\n//           });\n//         });\n//       }\n//     );\n//     setLoading(false);\n//     toast.success(\"Account created\");\n//     navigate(\"/login\");\n//     // console.log(user);\n//   } catch (error) {\n//     setLoading(false);\n//     toast.error(\"invalid input, please try again\");\n//   }\ncase 3:case\"end\":return _context2.stop();}}},_callee2);}));return function signup(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Helmet,{title:\"Signup\",children:[/*#__PURE__*/_jsx(CommonSection,{title:\"Signup\"}),/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{lg:\"6\",md:\"6\",sm:\"12\",className:\"m-auto text-center\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"form mb-5\",onSubmit:signup,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form__group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Username\",required:true,value:username,onChange:function onChange(e){return setUsername(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"form__group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",required:true,value:email,onChange:function onChange(e){return setEmail(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"form__group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",required:true,value:password,onChange:function onChange(e){return setPassword(e.target.value);}})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"addToCart__btn\",onClick:createUser,children:\"Sign Up\"})]}),/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Already have an account? Login\"})]})})})})]});};export default Register;","map":{"version":3,"names":["React","useState","Helmet","CommonSection","Container","Row","Col","Link","useNavigate","getAuth","createUserWithEmailAndPassword","db","collection","addDoc","UploadTask","Register","username","setUsername","email","setEmail","password","setPassword","usersCollectionRef","navigate","createUser","review","signup","e","preventDefault","auth","then","userCredential","user","console","log","catch","error","errorCode","code","errorMessage","message","alert","target","value"],"sources":["C:/D/my_project/Food-order-delivery/src/pages/Register.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { useState } from \"react\";\r\nimport Helmet from \"../components/Helmet/Helmet\";\r\nimport CommonSection from \"../components/UI/common-section/CommonSection\";\r\nimport { Container, Row, Col } from \"reactstrap\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { getAuth, createUserWithEmailAndPassword } from \"firebase/auth\";\r\n\r\nimport { db } from \"../firebase.config\";\r\nimport {\r\n  collection,\r\n  // setDoc,\r\n  // getDocs,\r\n  addDoc,\r\n  // updateDoc,\r\n  // deleteDoc,\r\n  // doc,\r\n} from \"firebase/firestore\";\r\nimport { UploadTask } from \"firebase/storage\";\r\n// import { ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\r\n// import { setDoc, doc } from \"firebase/firestore\";\r\n\r\n// import { auth } from \"../firebase.config\";\r\n// import { storage } from \"../firebase.config\";\r\n\r\nconst Register = () => {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const usersCollectionRef = collection(db, \"users\");\r\n  const navigate = useNavigate();\r\n\r\n  const createUser = async () => {\r\n    await addDoc(usersCollectionRef, {\r\n      username: username,\r\n      email: email,\r\n      review: \"\",\r\n    });\r\n    // await setDoc(doc(db, \"users\", user.uid), {\r\n    //   uid: user.uid,\r\n    //   username,\r\n    //   email,\r\n    //   review,\r\n    // });\r\n  };\r\n  const signup = async (e) => {\r\n    e.preventDefault();\r\n    const auth = getAuth();\r\n\r\n    createUserWithEmailAndPassword(auth, email, password)\r\n      .then((userCredential) => {\r\n        const user = userCredential.user;\r\n        console.log(user);\r\n        // console.log(user.uid);\r\n        navigate(\"/login\");\r\n      })\r\n      .catch((error) => {\r\n        // setLoading(false);\r\n        const errorCode = error.code;\r\n        const errorMessage = error.message;\r\n        console.log(errorMessage);\r\n        alert(\"Password should be at least 6 characters\");\r\n      });\r\n\r\n    // try {\r\n    //   const userCredential = await createUserWithEmailAndPassword(\r\n    //     auth,\r\n    //     email,\r\n    //     password\r\n    //   );\r\n\r\n    //   const user = await userCredential.user;\r\n    //   const storageRef = ref(storage, `images/${Date.now() + username}`);\r\n    //   const uploadTask = uploadBytesResumable(storageRef, file);\r\n\r\n    //     uploadTask.on(\r\n    //       (error) => {\r\n    //         toast.error(error.message);\r\n    //       },\r\n    //       () => {\r\n    //         getDownloadURL(uploadTask.snapshot.ref).then(async (downloadURL) => {\r\n    //           // update user frofile\r\n    //           await updateProfile(user, {\r\n    //             displayName: username,\r\n    //             photoURL: downloadURL,\r\n    //           });\r\n\r\n    //           // store user data in firebase database\r\n    //           await setDoc(doc(db, \"users\", user.uid), {\r\n    //             uid: user.uid,\r\n    //             displayName: username,\r\n    //             email,\r\n    //             photoURL: downloadURL,\r\n    //           });\r\n    //         });\r\n    //       }\r\n    //     );\r\n\r\n    //     setLoading(false);\r\n    //     toast.success(\"Account created\");\r\n    //     navigate(\"/login\");\r\n    //     // console.log(user);\r\n    //   } catch (error) {\r\n    //     setLoading(false);\r\n    //     toast.error(\"invalid input, please try again\");\r\n    //   }\r\n  };\r\n\r\n  return (\r\n    <Helmet title=\"Signup\">\r\n      <CommonSection title=\"Signup\" />\r\n      <section>\r\n        <Container>\r\n          <Row>\r\n            <Col lg=\"6\" md=\"6\" sm=\"12\" className=\"m-auto text-center\">\r\n              <form className=\"form mb-5\" onSubmit={signup}>\r\n                <div className=\"form__group\">\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Username\"\r\n                    required\r\n                    value={username}\r\n                    onChange={(e) => setUsername(e.target.value)}\r\n                  />\r\n                </div>\r\n                <div className=\"form__group\">\r\n                  <input\r\n                    type=\"email\"\r\n                    placeholder=\"Email\"\r\n                    required\r\n                    value={email}\r\n                    onChange={(e) => setEmail(e.target.value)}\r\n                  />\r\n                </div>\r\n                <div className=\"form__group\">\r\n                  <input\r\n                    type=\"password\"\r\n                    placeholder=\"Password\"\r\n                    required\r\n                    value={password}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                  />\r\n                </div>\r\n\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"addToCart__btn\"\r\n                  onClick={createUser}\r\n                >\r\n                  Sign Up\r\n                </button>\r\n              </form>\r\n              <Link to=\"/login\">Already have an account? Login</Link>\r\n            </Col>\r\n\r\n            {/* \r\n            {loading ? (\r\n              <Col lg=\"12\" className=\"text-center\">\r\n                <h5 className=\"fw-bold\">Loading......</h5>\r\n              </Col>\r\n            ) : (\r\n              <Col lg=\"6\" md=\"6\" sm=\"12\" className=\"m-auto text-center\">\r\n                <form className=\"form mb-5\" onSubmit={signup}>\r\n                  <div className=\"form__group\">\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Username\"\r\n                      required\r\n                      value={username}\r\n                      onChange={(e) => setUsername(e.target.value)}\r\n                    />\r\n                  </div>\r\n                  <div className=\"form__group\">\r\n                    <input\r\n                      type=\"email\"\r\n                      placeholder=\"Email\"\r\n                      required\r\n                      value={email}\r\n                      onChange={(e) => setEmail(e.target.value)}\r\n                    />\r\n                  </div>\r\n                  <div className=\"form__group\">\r\n                    <input\r\n                      type=\"password\"\r\n                      placeholder=\"Password\"\r\n                      required\r\n                      value={password}\r\n                      onChange={(e) => setPassword(e.target.value)}\r\n                    />\r\n                  </div>\r\n\r\n                                      \r\n                  <div className=\"form__group\">\r\n                    <input\r\n                      type=\"file\"\r\n                      onChange={(e) => setFile(e.target.files[0])}\r\n                    />\r\n                    </div>\r\n                    \r\n\r\n                  <button type=\"submit\" className=\"addToCart__btn\">\r\n                    Sign Up\r\n                  </button>\r\n                </form>\r\n                <Link to=\"/login\">Already have an account? Login</Link>\r\n              </Col>\r\n            )} */}\r\n          </Row>\r\n        </Container>\r\n      </section>\r\n    </Helmet>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}